rules:
  - id: review.sider.php.54.array
    pattern:
      token: "array("
      case_sensitive: false
    message: |
      配列定義は可読性の高い [] で定義しましょう

      PHP 5.4 以降、 array() の代わりに [] を利用できます。
      特別な理由がない限り、 [] を利用しましょう。

      - https://www.php.net/manual/ja/language.types.array.php
    fail:
      - array(1,2,3)
    pass:
      - "[1,2,3]"
    glob:
      - "*.php"
      - "**/*.php"
    justification:
      - 実行環境が PHP 5.4 未満
  - id: review.sider.php.70.elvis_operator
    pattern:
        regexp: 'isset\((\S+)\) *\? *\1 * : *(["''])\S+\2'
    message: |
      null合体演算子 を利用することで、よりシンプルなコードにできます

      PHP 7.0 以降、 エルビス演算子 の代わりに null合体演算子 を利用できます。
      可読性を上げるため活用しましょう。

      - https://ja.wikipedia.org/wiki/Null%E5%90%88%E4%BD%93%E6%BC%94%E7%AE%97%E5%AD%90#PHP
    fail:
      - "isset($var) ? $var : 'var'"
    pass:
      - $var ?? 'var'
    glob:
      - "*.php"
      - "**/*.php"
    justification:
      - 実行環境が PHP 7.0 未満
exclude:
  - vendor
